"use strict";var cartList=JSON.parse(localStorage.getItem("cartList"));function bindHtml(){var t=cartList.every(function(t){return!0===t.isSelect}),n='\n    <div id="top1">\n    <div class="top1 container">\n        <ul>\n            <li>\n                <input type="checkbox" '.concat(t?"checked":"",' class=\'selectAll\'>\n                全选\n            </li>\n            <li>图片</li>\n            <li>商品名称</li>\n            <li>单价</li>\n            <li>数量</li>\n            <li>小计</li>\n            <li>操作</li>\n        </ul>\n    </div>\n</div>\n<div id="center">\n    <div class="center container">\n        <ul>\n            ');cartList.forEach(function(t){n+='\n            <li>\n                <div class="select">\n                <input type="checkbox" '.concat(t.isSelect?"checked":""," class='smallSelect' data-id=").concat(t.list_id,'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                </div>\n                <div class="img">\n                    <img src="').concat(t.list_url,'"\n                        alt="">\n                </div>\n                <div>').concat(t.list_name,"</div>\n                <div>￥:").concat(t.list_price,"</div>\n                <div>\n                    <button class='sub'data-id=").concat(t.list_id,'>-</button>\n                    <input type="text" value="').concat(t.number,"\">\n                    <button class='add' data-id=").concat(t.list_id,">+</button>\n                </div>\n                <div>￥:").concat(t.xiaoji.toFixed(2),"</div>\n                <div data-id=").concat(t.list_id," class='del'>删除</div>\n            </li>\n    \n    ")});var i=cartList.filter(function(t){return!0===t.isSelect}),c=0,a=0;i.forEach(function(t){c+=t.number,a+=t.xiaoji}),n+='\n        </ul>\n    </div>\n</div>\n<div id="bottom">\n    <div class="bottom container">\n        <p><a href="../pages/list.html">继续选购</a> <em>|</em> 选中商品数量<span>'.concat(c,"</span></p>\n        <span>合计：").concat(a,'元</span>\n        <button class="pay" ').concat(i.length?"":"disabled",'>去结算</button>\n        <button class="clear">清空购物车</button>\n    </div>\n</div>\n    \n    '),$("#cart").html(n)}function bindEvent(){$("#cart").on("change",".selectAll",function(){var n=this;cartList.forEach(function(t){t.isSelect=n.checked}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$("#cart").on("change",".smallSelect",function(){var n=$(this).data("id");cartList.forEach(function(t){t.list_id===n&&(t.isSelect=!t.isSelect)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$("#cart").on("click",".sub",function(){var n=$(this).data("id");cartList.forEach(function(t){t.list_id===n&&(1!==t.number?t.number--:alert("数量不能小于1"),t.xiaoji=t.number*t.list_price)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$("#cart").on("click",".add",function(){var n=$(this).data("id");cartList.forEach(function(t){t.list_id===n&&(t.number++,t.xiaoji=t.number*t.list_price)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$("#cart").on("click",".del",function(){var n=$(this).data("id"),t=JSON.parse(localStorage.getItem("cartList"));t=t.filter(function(t){return t.list_id!=n}),console.log(t),localStorage.setItem("cartList",JSON.stringify(t)),bindHtml(),window.location.reload()}),$("#cart").on("click",".clear",function(){localStorage.removeItem("cartList"),bindHtml(),window.location.reload()})}cartList?(bindHtml(),bindEvent()):alert("您的购物车为空"),$(".logo").on("click",function(){console.log("回到首页"),window.location.href="../pages/index.html"});